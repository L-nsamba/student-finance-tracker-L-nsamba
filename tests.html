<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regex Tests - Finance Tracker</title>
    <style>
        body {font-family: Verdana, Geneva, Tahoma, sans-serif;}
        .test {margin: 10px 0 ; padding: 10px; border-left: 4px solid #ccc;}
        .pass {border-color: green; background-color: #f0fff0;}
        .fail {border-color: red; background-color: orange;}
        .test-section { margin: 20px 0;}
    </style>
</head>
<body>
    <h1>Regex Validation Tests</h1>
    <p>This page tests the regex patterns used in this web app</p>

    <div id="tests"></div>

    <script type="module">

        import {
            validateDescription,
            validateAmount,
            validateDate,
            validateCategory,
            validateDescriptionStrength,
            validateNoDuplicateWords
        } from './scripts/validators.js'

        function runTest(validator, input, expected, testName){
            /*
            Function defines the html to appear on the web page for different
            validation tests
            */

            const result = validator(input);
            const passed = result.isValid === expected;

            const testDiv = document.createElement('div');
            testDiv.className = `test ${passed ? 'pass' : 'fail'}`;
            testDiv.innerHTML =  `
            <strong>${testName}</strong><br>
            <strong>Input: </strong>"${input}"<br>
            <strong>Expected: </strong>${expected ? 'VALID' : 'INVALID'}<br>
            <strong>Actual: </strong>${result.isValid ? 'VALID' : 'INVALID'}<br>
            <strong>Message: </strong>${result.message}<br>
            `;

            return testDiv;
        }

        //Description tests
        const testsContainer = document.getElementById('tests');

        const descSection = document.createElement('div');
        descSection.className = 'test-section';
        descSection.innerHTML = '<h2>Description Validation Tests</h2>';


        const descTests = [
            ['Breakfast at mall', true, 'Normal description'],
            [' Supper', false, 'Leading spaces'],
            ['Dinner ', false, 'Trailing spaces'],
            ['', false, 'Empty description'],
            ['Cake', true, 'Single word'],
            ['Dinner with siblings', true, 'Multiple words']
        ];

        descTests.forEach(([input, expected, name]) => {
            descSection.appendChild(runTest(validateDescription, input, expected, name));
        });

        //Amount tests
        testsContainer.appendChild(descSection);

        const amountSection = document.createElement('div');
        amountSection.className = 'test-section';
        amountSection.innerHTML = '<h2>Amount Validation Tests</h2>'


        const amountTests = [
            ['4060', true, 'Whole number'],
            ['24.90', true, 'With decimal'],
            ['90.999', false, 'Too many decimals'],
            ['0', true, 'Zero amount'],
            ['-900', false, 'Negative number'],
            ['041', false, 'Leading zero']
        ];

        amountTests.forEach(([input, expected, name]) => {
            amountSection.appendChild(runTest(validateAmount, input, expected, name));

        });
        testsContainer.appendChild(amountSection);

        //Date Test
        const dateSection = document.createElement('div');
        dateSection.className = 'test-section';
        dateSection.innerHTML = '<h2>Date Validation Tests</h2>';

        const dateTests = [
            ['2025-10-15', true, 'Valid date'],
            ['2025-04-01', true, 'Valid date with leading zeros'],
            ['2025-1-2', false, 'Invalid date & month, missing leading zero'],
            ['2025-14-01', false, 'Invalid month'],
            ['2025.01.01', false, 'Invalid date, wrong separator'],
        ];

        dateTests.forEach(([input, expected, name]) => {
            dateSection.appendChild(runTest(validateDate, input, expected, name));

        });
        testsContainer.appendChild(dateSection);

        //Category Tests
        const categorySection = document.createElement('div');
        categorySection.className = 'test-section';
        categorySection.innerHTML = '<h2>Category Validation Tests</h2>'

        const categoryTests = [
            ['Food', true, 'Valid'],
            ['Transport', true, 'Valid'],
            ['Entertainment', true, 'Valid'],
            ['Books', true, 'Valid'],
            ['Other', true, 'Valid'],
            ['', false, 'Invalid']
        ];

        categoryTests.forEach(([input, expected, name]) => {
            categorySection.appendChild(runTest(validateCategory, input, expected, name));
        });
        testsContainer.appendChild(categorySection);

        //Duplicate words tests
        const duplicateSection = document.createElement('div');
        duplicateSection.className = 'test-section';
        duplicateSection.innerHTML = '<h2>Duplicate Words Validation</h2>'

        const duplicateTests = [
            ['supper supper with friends', false, 'Duplicate words'],
            ['Dinner with siblings', true, 'No duplicates'],
            ['Swimming on sunday', true, 'Normal description']

        ];

        duplicateTests.forEach(([input, expected, name]) => {
            duplicateSection.appendChild(runTest(validateNoDuplicateWords, input, expected, name));

        });

        testsContainer.appendChild(duplicateSection);




    </script>

</body>
</html>